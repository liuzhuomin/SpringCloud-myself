package xinrui.cloud.domain;

import com.google.common.collect.Lists;
import lombok.Data;

import javax.persistence.*;
import javax.validation.constraints.NotNull;
import java.util.Date;
import java.util.List;

/**
 * 科技金融实体类
 *
 * @author liuliuliu
 * @version 1.0
 * @date 2019/8/5 16:26
 */
@Entity
@Data
public class TechnologyFinancial extends IdEntity {

    /**
     * 科技金融产品名称
     */
    @NotNull
    @Column(columnDefinition = "text")
    private String name;

    /**
     * 展示的图片
     */
    @OneToMany(fetch = FetchType.LAZY, orphanRemoval = true, cascade = CascadeType.ALL, targetEntity = TechnologyApplyCondition.class)
    @OrderBy("createDate asc ")
    private List<TechnologyFinancialFile> viewImages = Lists.newArrayList();

    /**
     * 科技金融类别
     * 只可能为 信用贷/抵押贷
     */
    @NotNull
    private String category = TechnologyType.CREDIT_LOAN.value();

    /**
     * 产品标语
     */
    private String slogan;

    /**
     * 产品简介信息
     */
    @Column(columnDefinition = "text")
    private String information;

    /**
     * 贷款期限
     * {@link TechnologyLoanDate}
     */
    @OneToOne(fetch = FetchType.LAZY)
    private TechnologyLoanDate loanTimeLimit;

    /**
     * 申请结束时间
     */
    @Temporal(TemporalType.TIMESTAMP)
    private Date applyEndDate;

    /**
     * 贷款额度对象
     * {@link TechnologyLoanDate}
     */
    @OneToOne(fetch = FetchType.LAZY)
    private TechnologyLoanAmount loanAmount;

    /***
     * 申请条件对象集合
     * {@link TechnologyApplyCondition}
     */
    @OneToMany(fetch = FetchType.LAZY, orphanRemoval = true, cascade = CascadeType.ALL, targetEntity = TechnologyApplyCondition.class)
    @OrderBy("id asc ")
    private List<TechnologyApplyCondition> technologyApplyConditions = Lists.newArrayList();

    /**
     * 创建时间
     */
    @Temporal(TemporalType.TIMESTAMP)
    private Date createDate;

    /**
     * 问题对象
     */
    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL, orphanRemoval = true, targetEntity = TechnologyUsualProblem.class)
    private List<TechnologyUsualProblem> technologyUsualProblems = Lists.newArrayList();


    enum TechnologyType {
        /**
         * 信用贷
         */
        CREDIT_LOAN("信用贷"),
        /**
         * 抵押贷
         */
        MORTGAGES("抵押贷");

        private String type;

        TechnologyType(String type) {
            this.type = type;
        }

        public String value() {
            return this.type;
        }
    }


}
