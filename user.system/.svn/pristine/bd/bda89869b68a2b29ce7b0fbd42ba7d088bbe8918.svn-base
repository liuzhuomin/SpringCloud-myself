package liuzhuomin.cloud.service.impl;

import liuzhuomin.cloud.dao.UserRepository;
import liuzhuomin.cloud.domain.User;
import liuzhuomin.cloud.dto.UserDto;
import liuzhuomin.cloud.service.UserService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

/**
 * <B>Title:</B>UserServiceImpl</br>
 * <B>Description:</B>  </br>
 * <B>Copyright: </B>Copyright (c) 2019 </br>
 *
 * @author liuliuliu
 * @version 1.0
 * @date2019/6/26 20:34
 */
@Service
public class UserServiceImpl extends BaseServiceImpl<User> implements UserService {

    @Autowired
    UserRepository userRepository;

    @Override
    public UserDto findUserByUserName(String username) {
        return  UserDto.copy(userRepository.findUserByUserName(username));
    }

    @Override
    public UserDto findUserByUserId(Long userId) {
        return UserDto.copy(findById(userId));
    }

//    /**
//     * 通过userId获取用户信息
//     */
//    public UserDto getUser(String userId) {
//        List<Map<String, Object>> resultMap = userRepository.getUserInfo(userId);
//        UserTO userTo = new UserTO();
//        for (Map<String, Object> map : resultMap) {
//            userTo.setUserId(Long.parseLong(String.valueOf(map.get("id"))));
//            userTo.setUserName(String.valueOf(map.get("username")));
//            userTo.setPassword(String.valueOf(map.get("password")));
//            userTo.setShaPassword(String.valueOf(map.get("sha_password")));
//            userTo.setRealName(String.valueOf(map.get("realname")));
//            userTo.setStatus(String.valueOf(map.get("user_status")));
//            userTo.setPhone(String.valueOf(map.get("phone")));
//            String groupId = String.valueOf(map.get("unique_group_id"));
//            String groupType = String.valueOf(map.get("groupType"));
//            String logo = String.valueOf(map.get("logo"));
//            userTo.setLogo(logo);
//            userTo.setGroupType(groupType.equals("other") ? GroupType.OTHER : GroupType.ORGANIZATION);
//            if (!StringUtils.isEmpty(groupId) && !groupId.equals("null")) {
//                userTo.setCompanyId(Long.valueOf(groupId));
//                Map<String, Object> result =  new HashMap<>();
//                if (groupType.equals("other")) {
//                    result = companyDao.getCompanyInfo(groupId);
//                } else {
//                    result = companyDao.getOrganization(Long.valueOf(groupId));
//                }
//                GroupTO group = new GroupTO();
//                if(result != null && result.size() > 0){
//                    group.setGroupType(userTo.getGroupType());
//                    group.setName(String.valueOf(result.get("name")));
//                    group.setCreatorId(Long.parseLong(String.valueOf(result.get("creator_id"))));
//                    group.setId(Long.parseLong(String.valueOf(result.get("id"))));
//                    group.setLogo(String.valueOf(result.get("logo")));
//                    userTo.setGroupTo(group);
//                }
//            }
//            System.out.println("userId:"
//                    + userTo.getUserId()
//                    + " userName:"
//                    + userTo.getUserName()
//                    + "sha_password :"
//                    + userTo.getShaPassword());
//        }
//        return null;
//    }
}
